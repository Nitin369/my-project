\hypertarget{classPoco_1_1Util_1_1ServerApplication}{}\doxysection{Poco\+::Util\+::Server\+Application Class Reference}
\label{classPoco_1_1Util_1_1ServerApplication}\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}


{\ttfamily \#include $<$Server\+Application.\+h$>$}



Inheritance diagram for Poco\+::Util\+::Server\+Application\+:
% FIG 0


Collaboration diagram for Poco\+::Util\+::Server\+Application\+:
% FIG 1
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_a107ac768685294018d16227107ba90da}{Server\+Application}} ()
\item 
\mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_a52d957b32393e488699681df1f3bd9ff}{$\sim$\+Server\+Application}} ()
\begin{DoxyCompactList}\small\item\em Creates the \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication}{Server\+Application}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_a71083518a647971fa29b4b57ed74d8b2}{is\+Interactive}} () \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}}
\begin{DoxyCompactList}\small\item\em Destroys the \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication}{Server\+Application}}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_ac5151930516267f08abe6d1fe1fe1951}{run}} (int argc, char $\ast$$\ast$\mbox{\hyperlink{classPoco_1_1Util_1_1Application_a133d08bc16a0d6e99899255478f2226d}{argv}})
\item 
int \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_adc2bc7dfff305e305385fd758eed0753}{run}} (\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} std\+::vector$<$ std\+::string $>$ \&args)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_a42abcc7f77de41d1757a5680adcf04ea}{terminate}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_aefa48a05c28bc1eaf977a0824f3d5b58}{run}} ()
\item 
void \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_a17d66f7da578059c52e06a70031072e2}{wait\+For\+Termination\+Request}} ()
\item 
void \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_aeb9576c971c170fa354434f1fd8d9ee4}{define\+Options}} (\mbox{\hyperlink{classPoco_1_1Util_1_1OptionSet}{Option\+Set}} \&\mbox{\hyperlink{classPoco_1_1Util_1_1Application_aea1b5e46cdd79386a54c5e6b212bb258}{options}})
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
A subclass of the \mbox{\hyperlink{classPoco_1_1Util_1_1Application}{Application}} class that is used for implementing server applications.

A \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication}{Server\+Application}} allows for the application to run as a Windows service or as a Unix daemon without the need to add extra code.

For a \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication}{Server\+Application}} to work both from the command line and as a daemon or service, a few rules must be met\+:
\begin{DoxyItemize}
\item Subsystems must be registered in the constructor.
\item All non-\/trivial initializations must be made in the \mbox{\hyperlink{classPoco_1_1Util_1_1Application_a82f62471a68493049a7d3955f34976ca}{initialize()}} method.
\item At the end of the \mbox{\hyperlink{classPoco_1_1Util_1_1Application_acb65f34a4ebed4fa8b9987904a2555fc}{main()}} method, \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_a17d66f7da578059c52e06a70031072e2}{wait\+For\+Termination\+Request()}} should be called.
\item New threads must only be created in \mbox{\hyperlink{classPoco_1_1Util_1_1Application_a82f62471a68493049a7d3955f34976ca}{initialize()}} or \mbox{\hyperlink{classPoco_1_1Util_1_1Application_acb65f34a4ebed4fa8b9987904a2555fc}{main()}} or methods called from there, but not in the application class\textquotesingle{} constructor or in the constructor of instance variables. The reason for this is that fork() will be called in order to create the daemon process, and threads created prior to calling fork() won\textquotesingle{}t be taken over to the daemon process.
\item The main(argc, argv) function must look as follows\+:
\end{DoxyItemize}

int main(int argc, char$\ast$$\ast$ argv) \{ My\+Server\+Application app; return app.\+run(argc, argv); \}

The P\+O\+C\+O\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+M\+A\+IN macro can be used to implement main(argc, argv). If P\+O\+CO has been built with P\+O\+C\+O\+\_\+\+W\+I\+N32\+\_\+\+U\+T\+F8, P\+O\+C\+O\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+M\+A\+IN supports \mbox{\hyperlink{classPoco_1_1Unicode}{Unicode}} command line arguments.

On Windows platforms, an application built on top of the \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication}{Server\+Application}} class can be run both from the command line or as a service.

To run an application as a Windows service, it must be registered with the Windows Service Control Manager (S\+CM). To do this, the application can be started from the command line, with the /register\+Service option specified. This causes the application to register itself with the S\+CM, and then exit. Similarly, an application registered as a service can be unregistered, by specifying the /unregister\+Service option. The file name of the application executable (excluding the .exe suffix) is used as the service name. Additionally, a more user-\/friendly name can be specified, using the /display\+Name option (e.\+g., /display\+Name=\char`\"{}\+Demo Service\char`\"{}) and a service description can be added with the /description option. The startup mode (automatic or manual) for the service can be specified with the /startup option.

An application can determine whether it is running as a service by checking for the \char`\"{}application.\+run\+As\+Service\char`\"{} configuration property. \begin{DoxyVerb}if (config().getBool("application.runAsService", false))
{
    // do service specific things
}
\end{DoxyVerb}


Note that the working directory for an application running as a service is the Windows system directory (e.\+g., C\+:\textbackslash{}\+Windows\textbackslash{}system32). Take this into account when working with relative filesystem paths. Also, services run under a different user account, so an application that works when started from the command line may fail to run as a service if it depends on a certain environment (e.\+g., the P\+A\+TH environment variable).

An application registered as a Windows service can be started with the N\+ET S\+T\+A\+RT $<$name$>$ command and stopped with the N\+ET S\+T\+OP $<$name$>$ command. Alternatively, the Services M\+MC applet can be used.

On Unix platforms, an application built on top of the \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication}{Server\+Application}} class can be optionally run as a daemon by giving the --daemon command line option. A daemon, when launched, immediately forks off a background process that does the actual work. After launching the background process, the foreground process exits.

After the initialization is complete, but before entering the \mbox{\hyperlink{classPoco_1_1Util_1_1Application_acb65f34a4ebed4fa8b9987904a2555fc}{main()}} method, the current working directory for the daemon process is changed to the root directory (\char`\"{}/\char`\"{}), as it is common practice for daemon processes. Therefore, be careful when working with files, as relative paths may not point to where you expect them point to.

An application can determine whether it is running as a daemon by checking for the \char`\"{}application.\+run\+As\+Daemon\char`\"{} configuration property. \begin{DoxyVerb}if (config().getBool("application.runAsDaemon", false))
{
    // do daemon specific things
}
\end{DoxyVerb}


When running as a daemon, specifying the --pidfile option (e.\+g., --pidfile=/var/run/sample.pid) may be useful to record the process ID of the daemon in a file. The P\+ID file will be removed when the daemon process terminates (but not, if it crashes). 

Definition at line 35 of file Server\+Application.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_a107ac768685294018d16227107ba90da}\label{classPoco_1_1Util_1_1ServerApplication_a107ac768685294018d16227107ba90da}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!ServerApplication@{ServerApplication}}
\index{ServerApplication@{ServerApplication}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{ServerApplication()}{ServerApplication()}}
{\footnotesize\ttfamily Poco\+::\+Util\+::\+Server\+Application\+::\+Server\+Application (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_a52d957b32393e488699681df1f3bd9ff}\label{classPoco_1_1Util_1_1ServerApplication_a52d957b32393e488699681df1f3bd9ff}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!````~ServerApplication@{$\sim$ServerApplication}}
\index{````~ServerApplication@{$\sim$ServerApplication}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{$\sim$ServerApplication()}{~ServerApplication()}}
{\footnotesize\ttfamily Poco\+::\+Util\+::\+Server\+Application\+::$\sim$\+Server\+Application (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Creates the \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication}{Server\+Application}}. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_aeb9576c971c170fa354434f1fd8d9ee4}\label{classPoco_1_1Util_1_1ServerApplication_aeb9576c971c170fa354434f1fd8d9ee4}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!defineOptions@{defineOptions}}
\index{defineOptions@{defineOptions}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{defineOptions()}{defineOptions()}}
{\footnotesize\ttfamily void Poco\+::\+Util\+::\+Server\+Application\+::define\+Options (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classPoco_1_1Util_1_1OptionSet}{Option\+Set}} \&}]{options }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

Re-\/nitializes the application and all registered subsystems. Subsystems are always reinitialized in the exact same order in which they have been registered.

Overriding implementations must call the base class implementation. 

Reimplemented from \mbox{\hyperlink{classPoco_1_1Util_1_1Application_a387af69805eec896f1938c79167186dd}{Poco\+::\+Util\+::\+Application}}.

\mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_a71083518a647971fa29b4b57ed74d8b2}\label{classPoco_1_1Util_1_1ServerApplication_a71083518a647971fa29b4b57ed74d8b2}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!isInteractive@{isInteractive}}
\index{isInteractive@{isInteractive}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{isInteractive()}{isInteractive()}}
{\footnotesize\ttfamily bool Poco\+::\+Util\+::\+Server\+Application\+::is\+Interactive (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Destroys the \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication}{Server\+Application}}. 

\mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_aefa48a05c28bc1eaf977a0824f3d5b58}\label{classPoco_1_1Util_1_1ServerApplication_aefa48a05c28bc1eaf977a0824f3d5b58}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!run@{run}}
\index{run@{run}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily int Poco\+::\+Util\+::\+Server\+Application\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

Sends a friendly termination request to the application. If the application\textquotesingle{}s main thread is waiting in \mbox{\hyperlink{classPoco_1_1Util_1_1ServerApplication_a17d66f7da578059c52e06a70031072e2}{wait\+For\+Termination\+Request()}}, this method will return and the application can shut down. 

Reimplemented from \mbox{\hyperlink{classPoco_1_1Util_1_1Application_ae8dd43d565dd2a1f653c9484725624ae}{Poco\+::\+Util\+::\+Application}}.

\mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_adc2bc7dfff305e305385fd758eed0753}\label{classPoco_1_1Util_1_1ServerApplication_adc2bc7dfff305e305385fd758eed0753}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!run@{run}}
\index{run@{run}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily int Poco\+::\+Util\+::\+Server\+Application\+::run (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} std\+::vector$<$ std\+::string $>$ \&}]{args }\end{DoxyParamCaption})}

Runs the application by performing additional initializations and calling the \mbox{\hyperlink{classPoco_1_1Util_1_1Application_acb65f34a4ebed4fa8b9987904a2555fc}{main()}} method. \mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_ac5151930516267f08abe6d1fe1fe1951}\label{classPoco_1_1Util_1_1ServerApplication_ac5151930516267f08abe6d1fe1fe1951}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!run@{run}}
\index{run@{run}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{run()}{run()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily int Poco\+::\+Util\+::\+Server\+Application\+::run (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}

Returns true if the application runs from the command line. Returns false if the application runs as a Unix daemon or Windows service. \mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_a42abcc7f77de41d1757a5680adcf04ea}\label{classPoco_1_1Util_1_1ServerApplication_a42abcc7f77de41d1757a5680adcf04ea}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!terminate@{terminate}}
\index{terminate@{terminate}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{terminate()}{terminate()}}
{\footnotesize\ttfamily static void Poco\+::\+Util\+::\+Server\+Application\+::terminate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Runs the application by performing additional initializations and calling the \mbox{\hyperlink{classPoco_1_1Util_1_1Application_acb65f34a4ebed4fa8b9987904a2555fc}{main()}} method. \mbox{\Hypertarget{classPoco_1_1Util_1_1ServerApplication_a17d66f7da578059c52e06a70031072e2}\label{classPoco_1_1Util_1_1ServerApplication_a17d66f7da578059c52e06a70031072e2}} 
\index{Poco::Util::ServerApplication@{Poco::Util::ServerApplication}!waitForTerminationRequest@{waitForTerminationRequest}}
\index{waitForTerminationRequest@{waitForTerminationRequest}!Poco::Util::ServerApplication@{Poco::Util::ServerApplication}}
\doxysubsubsection{\texorpdfstring{waitForTerminationRequest()}{waitForTerminationRequest()}}
{\footnotesize\ttfamily void Poco\+::\+Util\+::\+Server\+Application\+::wait\+For\+Termination\+Request (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
App\+Frame\+Work/include/\+Poco/\+Util/\mbox{\hyperlink{ServerApplication_8h}{Server\+Application.\+h}}\end{DoxyCompactItemize}
