\hypertarget{MQTTClientPersistence_8h}{}\doxysection{App\+Frame\+Work/include/\+Io\+T/\+M\+Q\+T\+T/\+Paho/\+M\+Q\+T\+T\+Client\+Persistence.h File Reference}
\label{MQTTClientPersistence_8h}\index{AppFrameWork/include/IoT/MQTT/Paho/MQTTClientPersistence.h@{AppFrameWork/include/IoT/MQTT/Paho/MQTTClientPersistence.h}}


This structure represents a persistent data store, used to store outbound and inbound messages, in order to achieve reliable messaging.  


This graph shows which files directly or indirectly include this file\+:
% FIG 0
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structMQTTClient__persistence}{M\+Q\+T\+T\+Client\+\_\+persistence}}
\begin{DoxyCompactList}\small\item\em A structure containing the function pointers to a persistence implementation and the context or state that will be shared across all the persistence functions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{MQTTClientPersistence_8h_aaa948291718a9c06369b854b0f64bc32}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+D\+E\+F\+A\+U\+LT}}~0
\item 
\#define \mbox{\hyperlink{MQTTClientPersistence_8h_ae01e089313a65ac4661ed216b6ac00fa}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+N\+O\+NE}}~1
\item 
\#define \mbox{\hyperlink{MQTTClientPersistence_8h_a5dc68b8616e4041e037bad94ce07681b}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+U\+S\+ER}}~2
\item 
\#define \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}~-\/2
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef int($\ast$ \mbox{\hyperlink{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}{Persistence\+\_\+open}}) (void $\ast$$\ast$handle, \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} char $\ast$client\+ID, \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} char $\ast$server\+U\+RI, void $\ast$context)
\begin{DoxyCompactList}\small\item\em Initialize the persistent store. \end{DoxyCompactList}\item 
typedef int($\ast$ \mbox{\hyperlink{MQTTClientPersistence_8h_a3582de2c87e89f617e8e553b2a0e279a}{Persistence\+\_\+close}}) (void $\ast$handle)
\begin{DoxyCompactList}\small\item\em Close the persistent store referred to by the handle. \end{DoxyCompactList}\item 
typedef int($\ast$ \mbox{\hyperlink{MQTTClientPersistence_8h_a44679cab77cfbd6e2a4639cdd27ac80c}{Persistence\+\_\+put}}) (void $\ast$handle, char $\ast$key, int bufcount, char $\ast$buffers\mbox{[}$\,$\mbox{]}, int buflens\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Put the specified data into the persistent store. \end{DoxyCompactList}\item 
typedef int($\ast$ \mbox{\hyperlink{MQTTClientPersistence_8h_adc3aff3c570fa5509e9d6814a85ab867}{Persistence\+\_\+get}}) (void $\ast$handle, char $\ast$key, char $\ast$$\ast$buffer, int $\ast$buflen)
\begin{DoxyCompactList}\small\item\em Retrieve the specified data from the persistent store. \end{DoxyCompactList}\item 
typedef int($\ast$ \mbox{\hyperlink{MQTTClientPersistence_8h_a73350bf7208658bf5434a59f7bdbae90}{Persistence\+\_\+remove}}) (void $\ast$handle, char $\ast$key)
\begin{DoxyCompactList}\small\item\em Remove the data for the specified key from the store. \end{DoxyCompactList}\item 
typedef int($\ast$ \mbox{\hyperlink{MQTTClientPersistence_8h_a2601cc91eeabdbf9578f8dd45e4997a8}{Persistence\+\_\+keys}}) (void $\ast$handle, char $\ast$$\ast$$\ast$keys, int $\ast$nkeys)
\begin{DoxyCompactList}\small\item\em Returns the keys in this persistent data store. \end{DoxyCompactList}\item 
typedef int($\ast$ \mbox{\hyperlink{MQTTClientPersistence_8h_acee7097c1a0ab44b98c870f533687887}{Persistence\+\_\+clear}}) (void $\ast$handle)
\begin{DoxyCompactList}\small\item\em Clears the persistence store, so that it no longer contains any persisted data. \end{DoxyCompactList}\item 
typedef int($\ast$ \mbox{\hyperlink{MQTTClientPersistence_8h_a753a0f9a9c51284d63a907af19c7bbba}{Persistence\+\_\+containskey}}) (void $\ast$handle, char $\ast$key)
\begin{DoxyCompactList}\small\item\em Returns whether any data has been persisted using the specified key. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This structure represents a persistent data store, used to store outbound and inbound messages, in order to achieve reliable messaging. 

The M\+Q\+TT Client persists Qo\+S1 and Qo\+S2 messages in order to meet the assurances of delivery associated with these qos levels. The messages are saved in persistent storage The type and context of the persistence implementation are specified when the M\+Q\+TT client is created (see \mbox{\hyperlink{Paho_2MQTTClient_8h_aa7a557bf48735205a0fb137468576764}{M\+Q\+T\+T\+Client\+\_\+create()}}). The default persistence type (\mbox{\hyperlink{MQTTClientPersistence_8h_aaa948291718a9c06369b854b0f64bc32}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+D\+E\+F\+A\+U\+LT}}) uses a file system-\/based persistence mechanism. The {\itshape persistence\+\_\+context} argument passed to \mbox{\hyperlink{Paho_2MQTTClient_8h_aa7a557bf48735205a0fb137468576764}{M\+Q\+T\+T\+Client\+\_\+create()}} when using the default peristence is a string representing the location of the persistence directory. If the context argument is N\+U\+LL, the working directory will be used.

To use memory-\/based persistence, an application passes \mbox{\hyperlink{MQTTClientPersistence_8h_ae01e089313a65ac4661ed216b6ac00fa}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+N\+O\+NE}} as the {\itshape persistence\+\_\+type} to \mbox{\hyperlink{Paho_2MQTTClient_8h_aa7a557bf48735205a0fb137468576764}{M\+Q\+T\+T\+Client\+\_\+create()}}. This can lead to message loss in certain situations, but can be appropriate in some cases (see qos).

Client applications can provide their own persistence mechanism by passing \mbox{\hyperlink{MQTTClientPersistence_8h_a5dc68b8616e4041e037bad94ce07681b}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+U\+S\+ER}} as the {\itshape persistence\+\_\+type}. To implement a custom persistence mechanism, the application must pass an initialized \mbox{\hyperlink{structMQTTClient__persistence}{M\+Q\+T\+T\+Client\+\_\+persistence}} structure as the {\itshape persistence\+\_\+context} argument to \mbox{\hyperlink{Paho_2MQTTClient_8h_aa7a557bf48735205a0fb137468576764}{M\+Q\+T\+T\+Client\+\_\+create()}}.

If the functions defined return an \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}} then the state of the persisted data should remain as it was prior to the function being called. For example, if \mbox{\hyperlink{MQTTClientPersistence_8h_a44679cab77cfbd6e2a4639cdd27ac80c}{Persistence\+\_\+put()}} returns \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}, then it is assumed tha tthe persistent store does not contain the data that was passed to the function. Similarly, if \mbox{\hyperlink{MQTTClientPersistence_8h_a73350bf7208658bf5434a59f7bdbae90}{Persistence\+\_\+remove()}} returns \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}} then it is assumed that the data to be removed is still held in the persistent store.

It is up to the persistence implementation to log any error information that may be required to diagnose a persistence mechanism failure. 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{MQTTClientPersistence_8h_aaa948291718a9c06369b854b0f64bc32}\label{MQTTClientPersistence_8h_aaa948291718a9c06369b854b0f64bc32}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!MQTTCLIENT\_PERSISTENCE\_DEFAULT@{MQTTCLIENT\_PERSISTENCE\_DEFAULT}}
\index{MQTTCLIENT\_PERSISTENCE\_DEFAULT@{MQTTCLIENT\_PERSISTENCE\_DEFAULT}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{MQTTCLIENT\_PERSISTENCE\_DEFAULT}{MQTTCLIENT\_PERSISTENCE\_DEFAULT}}
{\footnotesize\ttfamily \#define M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+D\+E\+F\+A\+U\+LT~0}

This {\itshape persistence\+\_\+type} value specifies the default file system-\/based persistence mechanism (see \mbox{\hyperlink{Paho_2MQTTClient_8h_aa7a557bf48735205a0fb137468576764}{M\+Q\+T\+T\+Client\+\_\+create()}}). 

Definition at line 65 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}\label{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!MQTTCLIENT\_PERSISTENCE\_ERROR@{MQTTCLIENT\_PERSISTENCE\_ERROR}}
\index{MQTTCLIENT\_PERSISTENCE\_ERROR@{MQTTCLIENT\_PERSISTENCE\_ERROR}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{MQTTCLIENT\_PERSISTENCE\_ERROR}{MQTTCLIENT\_PERSISTENCE\_ERROR}}
{\footnotesize\ttfamily \#define M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR~-\/2}

Application-\/specific persistence functions must return this error code if there is a problem executing the function. 

Definition at line 81 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_ae01e089313a65ac4661ed216b6ac00fa}\label{MQTTClientPersistence_8h_ae01e089313a65ac4661ed216b6ac00fa}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!MQTTCLIENT\_PERSISTENCE\_NONE@{MQTTCLIENT\_PERSISTENCE\_NONE}}
\index{MQTTCLIENT\_PERSISTENCE\_NONE@{MQTTCLIENT\_PERSISTENCE\_NONE}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{MQTTCLIENT\_PERSISTENCE\_NONE}{MQTTCLIENT\_PERSISTENCE\_NONE}}
{\footnotesize\ttfamily \#define M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+N\+O\+NE~1}

This {\itshape persistence\+\_\+type} value specifies a memory-\/based persistence mechanism (see \mbox{\hyperlink{Paho_2MQTTClient_8h_aa7a557bf48735205a0fb137468576764}{M\+Q\+T\+T\+Client\+\_\+create()}}). 

Definition at line 70 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_a5dc68b8616e4041e037bad94ce07681b}\label{MQTTClientPersistence_8h_a5dc68b8616e4041e037bad94ce07681b}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!MQTTCLIENT\_PERSISTENCE\_USER@{MQTTCLIENT\_PERSISTENCE\_USER}}
\index{MQTTCLIENT\_PERSISTENCE\_USER@{MQTTCLIENT\_PERSISTENCE\_USER}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{MQTTCLIENT\_PERSISTENCE\_USER}{MQTTCLIENT\_PERSISTENCE\_USER}}
{\footnotesize\ttfamily \#define M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+U\+S\+ER~2}

This {\itshape persistence\+\_\+type} value specifies an application-\/specific persistence mechanism (see \mbox{\hyperlink{Paho_2MQTTClient_8h_aa7a557bf48735205a0fb137468576764}{M\+Q\+T\+T\+Client\+\_\+create()}}). 

Definition at line 75 of file M\+Q\+T\+T\+Client\+Persistence.\+h.



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{MQTTClientPersistence_8h_acee7097c1a0ab44b98c870f533687887}\label{MQTTClientPersistence_8h_acee7097c1a0ab44b98c870f533687887}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!Persistence\_clear@{Persistence\_clear}}
\index{Persistence\_clear@{Persistence\_clear}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{Persistence\_clear}{Persistence\_clear}}
{\footnotesize\ttfamily typedef int($\ast$ Persistence\+\_\+clear) (void $\ast$handle)}



Clears the persistence store, so that it no longer contains any persisted data. 


\begin{DoxyParams}{Parameters}
{\em handle} & The handle pointer from a successful call to \mbox{\hyperlink{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}{Persistence\+\_\+open()}}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if the function completes successfully, otherwise return \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}. 
\end{DoxyReturn}


Definition at line 193 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_a3582de2c87e89f617e8e553b2a0e279a}\label{MQTTClientPersistence_8h_a3582de2c87e89f617e8e553b2a0e279a}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!Persistence\_close@{Persistence\_close}}
\index{Persistence\_close@{Persistence\_close}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{Persistence\_close}{Persistence\_close}}
{\footnotesize\ttfamily typedef int($\ast$ Persistence\+\_\+close) (void $\ast$handle)}



Close the persistent store referred to by the handle. 


\begin{DoxyParams}{Parameters}
{\em handle} & The handle pointer from a successful call to \mbox{\hyperlink{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}{Persistence\+\_\+open()}}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if the function completes successfully, otherwise return \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}. 
\end{DoxyReturn}


Definition at line 119 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_a753a0f9a9c51284d63a907af19c7bbba}\label{MQTTClientPersistence_8h_a753a0f9a9c51284d63a907af19c7bbba}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!Persistence\_containskey@{Persistence\_containskey}}
\index{Persistence\_containskey@{Persistence\_containskey}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{Persistence\_containskey}{Persistence\_containskey}}
{\footnotesize\ttfamily typedef int($\ast$ Persistence\+\_\+containskey) (void $\ast$handle, char $\ast$key)}



Returns whether any data has been persisted using the specified key. 


\begin{DoxyParams}{Parameters}
{\em handle} & The handle pointer from a successful call to \mbox{\hyperlink{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}{Persistence\+\_\+open()}}. \\
\hline
{\em key} & The string to be tested for existence in the store. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if the key was found in the store, otherwise return \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}. 
\end{DoxyReturn}


Definition at line 204 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_adc3aff3c570fa5509e9d6814a85ab867}\label{MQTTClientPersistence_8h_adc3aff3c570fa5509e9d6814a85ab867}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!Persistence\_get@{Persistence\_get}}
\index{Persistence\_get@{Persistence\_get}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{Persistence\_get}{Persistence\_get}}
{\footnotesize\ttfamily typedef int($\ast$ Persistence\+\_\+get) (void $\ast$handle, char $\ast$key, char $\ast$$\ast$buffer, int $\ast$buflen)}



Retrieve the specified data from the persistent store. 


\begin{DoxyParams}{Parameters}
{\em handle} & The handle pointer from a successful call to \mbox{\hyperlink{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}{Persistence\+\_\+open()}}. \\
\hline
{\em key} & A string that is the key for the data to be retrieved. This is the same key used to save the data to the store with \mbox{\hyperlink{MQTTClientPersistence_8h_a44679cab77cfbd6e2a4639cdd27ac80c}{Persistence\+\_\+put()}}. \\
\hline
{\em buffer} & The address of a pointer to a buffer. This function sets the pointer to point at the retrieved data, if successful. \\
\hline
{\em buflen} & The address of an int that is set to the length of {\itshape buffer} by this function if successful. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if the function completes successfully, otherwise return \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}. 
\end{DoxyReturn}


Definition at line 152 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_a2601cc91eeabdbf9578f8dd45e4997a8}\label{MQTTClientPersistence_8h_a2601cc91eeabdbf9578f8dd45e4997a8}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!Persistence\_keys@{Persistence\_keys}}
\index{Persistence\_keys@{Persistence\_keys}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{Persistence\_keys}{Persistence\_keys}}
{\footnotesize\ttfamily typedef int($\ast$ Persistence\+\_\+keys) (void $\ast$handle, char $\ast$$\ast$$\ast$keys, int $\ast$nkeys)}



Returns the keys in this persistent data store. 


\begin{DoxyParams}{Parameters}
{\em handle} & The handle pointer from a successful call to \mbox{\hyperlink{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}{Persistence\+\_\+open()}}. \\
\hline
{\em keys} & The address of a pointer to pointers to strings. Assuming successful execution, this function allocates memory to hold the returned keys (strings used to store the data with \mbox{\hyperlink{MQTTClientPersistence_8h_a44679cab77cfbd6e2a4639cdd27ac80c}{Persistence\+\_\+put()}}). It also allocates memory to hold an array of pointers to these strings. {\itshape keys} is set to point to the array of pointers to strings. \\
\hline
{\em nkeys} & A pointer to the number of keys in this persistent data store. This function sets the number of keys, if successful. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if the function completes successfully, otherwise return \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}. 
\end{DoxyReturn}


Definition at line 182 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}\label{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!Persistence\_open@{Persistence\_open}}
\index{Persistence\_open@{Persistence\_open}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{Persistence\_open}{Persistence\_open}}
{\footnotesize\ttfamily typedef int($\ast$ Persistence\+\_\+open) (void $\ast$$\ast$handle, \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} char $\ast$client\+ID, \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} char $\ast$server\+U\+RI, void $\ast$context)}



Initialize the persistent store. 

Either open the existing persistent store for this client ID or create a new one if one doesn\textquotesingle{}t exist. If the persistent store is already open, return without taking any action.

An application can use the same client identifier to connect to many different servers. The {\itshape clientid} in conjunction with the {\itshape server\+U\+RI} uniquely identifies the persistence store required.


\begin{DoxyParams}{Parameters}
{\em handle} & The address of a pointer to a handle for this persistence implementation. This function must set handle to a valid reference to the persistence following a successful return. The handle pointer is passed as an argument to all the other persistence functions. It may include the context parameter and/or any other data for use by the persistence functions. \\
\hline
{\em client\+ID} & The client identifier for which the persistent store should be opened. \\
\hline
{\em server\+U\+RI} & The connection string specified when the M\+Q\+TT client was created (see \mbox{\hyperlink{Paho_2MQTTClient_8h_aa7a557bf48735205a0fb137468576764}{M\+Q\+T\+T\+Client\+\_\+create()}}). \\
\hline
{\em context} & A pointer to any data required to initialize the persistent store (see \mbox{\hyperlink{structMQTTClient__persistence}{M\+Q\+T\+T\+Client\+\_\+persistence}}). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if the function completes successfully, otherwise return \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}. 
\end{DoxyReturn}


Definition at line 109 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_a44679cab77cfbd6e2a4639cdd27ac80c}\label{MQTTClientPersistence_8h_a44679cab77cfbd6e2a4639cdd27ac80c}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!Persistence\_put@{Persistence\_put}}
\index{Persistence\_put@{Persistence\_put}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{Persistence\_put}{Persistence\_put}}
{\footnotesize\ttfamily typedef int($\ast$ Persistence\+\_\+put) (void $\ast$handle, char $\ast$key, int bufcount, char $\ast$buffers\mbox{[}$\,$\mbox{]}, int buflens\mbox{[}$\,$\mbox{]})}



Put the specified data into the persistent store. 


\begin{DoxyParams}{Parameters}
{\em handle} & The handle pointer from a successful call to \mbox{\hyperlink{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}{Persistence\+\_\+open()}}. \\
\hline
{\em key} & A string used as the key for the data to be put in the store. The key is later used to retrieve data from the store with \mbox{\hyperlink{MQTTClientPersistence_8h_adc3aff3c570fa5509e9d6814a85ab867}{Persistence\+\_\+get()}}. \\
\hline
{\em bufcount} & The number of buffers to write to the persistence store. \\
\hline
{\em buffers} & An array of pointers to the data buffers associated with this {\itshape key}. \\
\hline
{\em buflens} & An array of lengths of the data buffers. {\itshape buflen\mbox{[}n\mbox{]}} gives the length of {\itshape buffer\mbox{[}n\mbox{]}}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if the function completes successfully, otherwise return \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}. 
\end{DoxyReturn}


Definition at line 136 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

\mbox{\Hypertarget{MQTTClientPersistence_8h_a73350bf7208658bf5434a59f7bdbae90}\label{MQTTClientPersistence_8h_a73350bf7208658bf5434a59f7bdbae90}} 
\index{MQTTClientPersistence.h@{MQTTClientPersistence.h}!Persistence\_remove@{Persistence\_remove}}
\index{Persistence\_remove@{Persistence\_remove}!MQTTClientPersistence.h@{MQTTClientPersistence.h}}
\doxysubsubsection{\texorpdfstring{Persistence\_remove}{Persistence\_remove}}
{\footnotesize\ttfamily typedef int($\ast$ Persistence\+\_\+remove) (void $\ast$handle, char $\ast$key)}



Remove the data for the specified key from the store. 


\begin{DoxyParams}{Parameters}
{\em handle} & The handle pointer from a successful call to \mbox{\hyperlink{MQTTClientPersistence_8h_a4c7d332bb16907058ae3b375488b6008}{Persistence\+\_\+open()}}. \\
\hline
{\em key} & A string that is the key for the data to be removed from the store. This is the same key used to save the data to the store with \mbox{\hyperlink{MQTTClientPersistence_8h_a44679cab77cfbd6e2a4639cdd27ac80c}{Persistence\+\_\+put()}}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if the function completes successfully, otherwise return \mbox{\hyperlink{MQTTClientPersistence_8h_ab716e21e53c84a5ad62aa962a2a8f7db}{M\+Q\+T\+T\+C\+L\+I\+E\+N\+T\+\_\+\+P\+E\+R\+S\+I\+S\+T\+E\+N\+C\+E\+\_\+\+E\+R\+R\+OR}}. 
\end{DoxyReturn}


Definition at line 165 of file M\+Q\+T\+T\+Client\+Persistence.\+h.

