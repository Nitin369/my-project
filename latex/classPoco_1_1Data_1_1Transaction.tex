\hypertarget{classPoco_1_1Data_1_1Transaction}{}\doxysection{Poco\+::Data\+::Transaction Class Reference}
\label{classPoco_1_1Data_1_1Transaction}\index{Poco::Data::Transaction@{Poco::Data::Transaction}}


{\ttfamily \#include $<$Transaction.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a804e8b09f1bd917c39e2c3afb7eb941c}{Transaction}} (\mbox{\hyperlink{classPoco_1_1Data_1_1Session}{Poco\+::\+Data\+::\+Session}} \&session, \mbox{\hyperlink{classPoco_1_1Logger}{Poco\+::\+Logger}} $\ast$p\+Logger=0)
\item 
\mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a38554a2ac6d01ff5067b4869ec644893}{Transaction}} (\mbox{\hyperlink{classPoco_1_1Data_1_1Session}{Poco\+::\+Data\+::\+Session}} \&session, bool start)
\begin{DoxyCompactList}\small\item\em Creates the \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} and starts it, using the given database session and logger. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\\mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_af0ba48eeba909e97c424bcc39f10162b}{Transaction}} (\mbox{\hyperlink{classPoco_1_1Data_1_1Session}{Poco\+::\+Data\+::\+Session}} \&r\+Session, T \&t, \mbox{\hyperlink{classPoco_1_1Logger}{Poco\+::\+Logger}} $\ast$p\+Logger=0)
\item 
\mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_aeff67f72c49c831a5c5cd30e5fcbbc4c}{$\sim$\+Transaction}} ()
\item 
void \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a2dc4f06470939f80421c2c05d6ddf2f0}{set\+Isolation}} (Poco\+::\+U\+Int32 ti)
\item 
Poco\+::\+U\+Int32 \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_ae87a2b122447cc80d60f1e165005d9d9}{get\+Isolation}} ()
\begin{DoxyCompactList}\small\item\em Sets the transaction isolation level. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_ab140f71695077c69a9d27864be765d4d}{has\+Isolation}} (Poco\+::\+U\+Int32 ti)
\begin{DoxyCompactList}\small\item\em Returns the transaction isolation level. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a0ba304fbb6101d63ae2d60027c81bbda}{is\+Isolation}} (Poco\+::\+U\+Int32 ti)
\item 
void \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_ac43d63e969eb7696e4237e28c8712d4b}{execute}} (\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} std\+::string \&sql, bool do\+Commit=true)
\item 
void \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a3f294f864d39e1662285847aeffa6ac9}{execute}} (\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} std\+::vector$<$ std\+::string $>$ \&sql)
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a712cdfb2a0ae6493922cc60840006d2b}{transact}} (T \&t)
\item 
void \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_aea4a6b787eb475ed9c13445b683bb4c3}{commit}} ()
\item 
void \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a04bf9b92bec46ddc988030d1fd549e12}{rollback}} ()
\begin{DoxyCompactList}\small\item\em Commits the current transaction. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_afb70de0fa346ced4fcaa645f9593b570}{is\+Active}} ()
\begin{DoxyCompactList}\small\item\em Rolls back the current transaction. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a8752a85e567384a4eea73375916e1161}{set\+Logger}} (\mbox{\hyperlink{classPoco_1_1Logger}{Poco\+::\+Logger}} $\ast$p\+Logger)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} helps with transactions in domain logic. When an \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} object is created, it first checks whether a transaction is in progress. If not, a new transaction is created. When the \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} is destroyed, and \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_aea4a6b787eb475ed9c13445b683bb4c3}{commit()}} has been called, nothing is done. Otherwise, the current transaction is rolled back. See \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} for more details and purpose of this template. 

Definition at line 33 of file Transaction.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_a804e8b09f1bd917c39e2c3afb7eb941c}\label{classPoco_1_1Data_1_1Transaction_a804e8b09f1bd917c39e2c3afb7eb941c}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!Transaction@{Transaction}}
\index{Transaction@{Transaction}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{Transaction()}{Transaction()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily Poco\+::\+Data\+::\+Transaction\+::\+Transaction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classPoco_1_1Data_1_1Session}{Poco\+::\+Data\+::\+Session}} \&}]{session,  }\item[{\mbox{\hyperlink{classPoco_1_1Logger}{Poco\+::\+Logger}} $\ast$}]{p\+Logger = {\ttfamily 0} }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_a38554a2ac6d01ff5067b4869ec644893}\label{classPoco_1_1Data_1_1Transaction_a38554a2ac6d01ff5067b4869ec644893}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!Transaction@{Transaction}}
\index{Transaction@{Transaction}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{Transaction()}{Transaction()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily Poco\+::\+Data\+::\+Transaction\+::\+Transaction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classPoco_1_1Data_1_1Session}{Poco\+::\+Data\+::\+Session}} \&}]{session,  }\item[{bool}]{start }\end{DoxyParamCaption})}



Creates the \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} and starts it, using the given database session and logger. 

\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_af0ba48eeba909e97c424bcc39f10162b}\label{classPoco_1_1Data_1_1Transaction_af0ba48eeba909e97c424bcc39f10162b}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!Transaction@{Transaction}}
\index{Transaction@{Transaction}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{Transaction()}{Transaction()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
Poco\+::\+Data\+::\+Transaction\+::\+Transaction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classPoco_1_1Data_1_1Session}{Poco\+::\+Data\+::\+Session}} \&}]{r\+Session,  }\item[{T \&}]{t,  }\item[{\mbox{\hyperlink{classPoco_1_1Logger}{Poco\+::\+Logger}} $\ast$}]{p\+Logger = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Creates the \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}}, using the given database session. If start is true, transaction is started, otherwise begin() must be called to start the transaction. Creates the \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}}, using the given database session, transactor and logger. The transactor type must provide operator () overload taking non-\/const \mbox{\hyperlink{classPoco_1_1Data_1_1Session}{Session}} reference as an argument.

When transaction is created using this constructor, it is executed and commited automatically. If no error occurs, rollback is disabled and does not occur at destruction time. If an error occurs resulting in exception being thrown, the transaction is rolled back and exception propagated to calling code.

Example usage\+:

struct Transactor \{ void operator () (\mbox{\hyperlink{classPoco_1_1Data_1_1Session}{Session}}\& session) const \{ // do something ... \} \};

Transactor tr; \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} tn(session, tr); ~\newline
 

Definition at line 51 of file Transaction.\+h.

\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_aeff67f72c49c831a5c5cd30e5fcbbc4c}\label{classPoco_1_1Data_1_1Transaction_aeff67f72c49c831a5c5cd30e5fcbbc4c}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!````~Transaction@{$\sim$Transaction}}
\index{````~Transaction@{$\sim$Transaction}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{$\sim$Transaction()}{~Transaction()}}
{\footnotesize\ttfamily Poco\+::\+Data\+::\+Transaction\+::$\sim$\+Transaction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_aea4a6b787eb475ed9c13445b683bb4c3}\label{classPoco_1_1Data_1_1Transaction_aea4a6b787eb475ed9c13445b683bb4c3}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!commit@{commit}}
\index{commit@{commit}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{commit()}{commit()}}
{\footnotesize\ttfamily void Poco\+::\+Data\+::\+Transaction\+::commit (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_ac43d63e969eb7696e4237e28c8712d4b}\label{classPoco_1_1Data_1_1Transaction_ac43d63e969eb7696e4237e28c8712d4b}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!execute@{execute}}
\index{execute@{execute}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Poco\+::\+Data\+::\+Transaction\+::execute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} std\+::string \&}]{sql,  }\item[{bool}]{do\+Commit = {\ttfamily true} }\end{DoxyParamCaption})}

Returns true iff the transaction isolation level corresponds to the supplied bitmask. \mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_a3f294f864d39e1662285847aeffa6ac9}\label{classPoco_1_1Data_1_1Transaction_a3f294f864d39e1662285847aeffa6ac9}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!execute@{execute}}
\index{execute@{execute}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Poco\+::\+Data\+::\+Transaction\+::execute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} std\+::vector$<$ std\+::string $>$ \&}]{sql }\end{DoxyParamCaption})}

Executes and, if do\+Commit is true, commits the transaction. Passing true value for commit disables rollback during destruction of this \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} object. \mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_ae87a2b122447cc80d60f1e165005d9d9}\label{classPoco_1_1Data_1_1Transaction_ae87a2b122447cc80d60f1e165005d9d9}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!getIsolation@{getIsolation}}
\index{getIsolation@{getIsolation}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{getIsolation()}{getIsolation()}}
{\footnotesize\ttfamily Poco\+::\+U\+Int32 Poco\+::\+Data\+::\+Transaction\+::get\+Isolation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Sets the transaction isolation level. 



Definition at line 169 of file Transaction.\+h.

Here is the call graph for this function\+:
% FIG 0
\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_ab140f71695077c69a9d27864be765d4d}\label{classPoco_1_1Data_1_1Transaction_ab140f71695077c69a9d27864be765d4d}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!hasIsolation@{hasIsolation}}
\index{hasIsolation@{hasIsolation}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{hasIsolation()}{hasIsolation()}}
{\footnotesize\ttfamily bool Poco\+::\+Data\+::\+Transaction\+::has\+Isolation (\begin{DoxyParamCaption}\item[{Poco\+::\+U\+Int32}]{ti }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Returns the transaction isolation level. 



Definition at line 175 of file Transaction.\+h.

Here is the call graph for this function\+:
% FIG 1
\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_afb70de0fa346ced4fcaa645f9593b570}\label{classPoco_1_1Data_1_1Transaction_afb70de0fa346ced4fcaa645f9593b570}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!isActive@{isActive}}
\index{isActive@{isActive}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{isActive()}{isActive()}}
{\footnotesize\ttfamily bool Poco\+::\+Data\+::\+Transaction\+::is\+Active (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Rolls back the current transaction. 



Definition at line 157 of file Transaction.\+h.

Here is the call graph for this function\+:
% FIG 2
\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_a0ba304fbb6101d63ae2d60027c81bbda}\label{classPoco_1_1Data_1_1Transaction_a0ba304fbb6101d63ae2d60027c81bbda}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!isIsolation@{isIsolation}}
\index{isIsolation@{isIsolation}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{isIsolation()}{isIsolation()}}
{\footnotesize\ttfamily bool Poco\+::\+Data\+::\+Transaction\+::is\+Isolation (\begin{DoxyParamCaption}\item[{Poco\+::\+U\+Int32}]{ti }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns true iff the transaction isolation level corresponding to the supplied bitmask is supported. 

Definition at line 181 of file Transaction.\+h.

Here is the call graph for this function\+:
% FIG 3
\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_a04bf9b92bec46ddc988030d1fd549e12}\label{classPoco_1_1Data_1_1Transaction_a04bf9b92bec46ddc988030d1fd549e12}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!rollback@{rollback}}
\index{rollback@{rollback}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{rollback()}{rollback()}}
{\footnotesize\ttfamily void Poco\+::\+Data\+::\+Transaction\+::rollback (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Commits the current transaction. 

\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_a2dc4f06470939f80421c2c05d6ddf2f0}\label{classPoco_1_1Data_1_1Transaction_a2dc4f06470939f80421c2c05d6ddf2f0}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!setIsolation@{setIsolation}}
\index{setIsolation@{setIsolation}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{setIsolation()}{setIsolation()}}
{\footnotesize\ttfamily void Poco\+::\+Data\+::\+Transaction\+::set\+Isolation (\begin{DoxyParamCaption}\item[{Poco\+::\+U\+Int32}]{ti }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Destroys the \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}}. Rolls back the current database transaction if it has not been commited (by calling \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_aea4a6b787eb475ed9c13445b683bb4c3}{commit()}}), or rolled back (by calling \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction_a04bf9b92bec46ddc988030d1fd549e12}{rollback()}}).

If an exception is thrown during rollback, the exception is logged and no further action is taken. ~\newline
 

Definition at line 163 of file Transaction.\+h.

Here is the call graph for this function\+:
% FIG 4
\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_a8752a85e567384a4eea73375916e1161}\label{classPoco_1_1Data_1_1Transaction_a8752a85e567384a4eea73375916e1161}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!setLogger@{setLogger}}
\index{setLogger@{setLogger}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{setLogger()}{setLogger()}}
{\footnotesize\ttfamily void Poco\+::\+Data\+::\+Transaction\+::set\+Logger (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classPoco_1_1Logger}{Poco\+::\+Logger}} $\ast$}]{p\+Logger }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns false after the transaction has been committed or rolled back, true if the transaction is ongoing. 

Definition at line 187 of file Transaction.\+h.

\mbox{\Hypertarget{classPoco_1_1Data_1_1Transaction_a712cdfb2a0ae6493922cc60840006d2b}\label{classPoco_1_1Data_1_1Transaction_a712cdfb2a0ae6493922cc60840006d2b}} 
\index{Poco::Data::Transaction@{Poco::Data::Transaction}!transact@{transact}}
\index{transact@{transact}!Poco::Data::Transaction@{Poco::Data::Transaction}}
\doxysubsubsection{\texorpdfstring{transact()}{transact()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void Poco\+::\+Data\+::\+Transaction\+::transact (\begin{DoxyParamCaption}\item[{T \&}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Executes all the S\+QL statements supplied in the vector and, after the last one is sucesfully executed, commits the transaction. If an error occurs during execution, transaction is rolled back. Passing true value for commit disables rollback during destruction of this \mbox{\hyperlink{classPoco_1_1Data_1_1Transaction}{Transaction}} object. Executes the transactor and, unless transactor throws an exception, commits the transaction. 

Definition at line 120 of file Transaction.\+h.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
App\+Frame\+Work/include/\+Poco/\+Data/\mbox{\hyperlink{Transaction_8h}{Transaction.\+h}}\end{DoxyCompactItemize}
